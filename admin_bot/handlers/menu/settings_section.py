"""
ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ° ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (Ğ½Ğ¸Ğ¶Ğ½ÑÑ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ°).
"""

from aiogram import F
from aiogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton


async def reply_help_handler(message: Message):
    """ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ - Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ°Ñ FAQ Ğ´Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²"""
    text = (
        "â“ <b>ĞŸĞĞœĞĞ©Ğ¬ â€” Ğ§ĞĞ¡Ğ¢Ğ«Ğ• Ğ’ĞĞŸĞ ĞĞ¡Ğ«</b>\n\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
        "ğŸ“‹ <b>Ğ—ĞĞšĞĞ—Ğ« Ğ˜ Ğ—ĞĞŸĞ˜Ğ¡Ğ˜</b>\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n"
        "<b>ĞšĞ°Ğº Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ?</b>\n"
        "â†’ Ğ—Ğ°ĞºĞ°Ğ·Ñ‹ â†’ Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ\n\n"
        "<b>ĞšĞ°Ğº Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°?</b>\n"
        "â†’ Ğ—Ğ°ĞºĞ°Ğ·Ñ‹ â†’ Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ/Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°/ĞĞµĞ´ĞµĞ»Ñ â†’ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ â†’ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ\n\n"
        "<b>Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ CSV Ğ¸ Ğ·Ğ°Ñ‡ĞµĞ¼ Ğ¾Ğ½?</b>\n"
        "â†’ CSV â€” ÑÑ‚Ğ¾ Ñ„Ğ°Ğ¹Ğ»-Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ´Ğ»Ñ Excel/Google Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†.\n"
        "â†’ Ğ—Ğ°ĞºĞ°Ğ·Ñ‹ â†’ CSV â€” ÑĞºĞ°Ñ‡Ğ°ĞµÑ‚Ğµ Ğ²ÑĞµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ·Ğ° Ğ¼ĞµÑÑÑ†.\n\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
        "ğŸ‘¤ <b>ĞŸĞ•Ğ Ğ¡ĞĞĞĞ›</b>\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n"
        "<b>ĞœĞ°ÑÑ‚ĞµÑ€ Ğ² Ğ¾Ñ‚Ğ¿ÑƒÑĞºĞµ â€” Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ?</b>\n"
        "â†’ ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ» â†’ Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ Ğ´Ğ°Ñ‚Ñ‹ â†’ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ° â†’ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ´Ğ°Ñ‚Ñ‹.\n\n"
        "<b>ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ°?</b>\n"
        "â†’ ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ» â†’ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ â†’ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ° â†’ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº\n\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
        "ğŸ’¼ <b>Ğ£Ğ¡Ğ›Ğ£Ğ“Ğ˜ Ğ˜ ĞĞšĞ¦Ğ˜Ğ˜</b>\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n"
        "<b>ĞšĞ°Ğº Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ ÑƒÑĞ»ÑƒĞ³Ñƒ?</b>\n"
        "â†’ Ğ£ÑĞ»ÑƒĞ³Ğ¸ â†’ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ â†’ Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ, Ñ†ĞµĞ½Ñƒ, Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ\n\n"
        "<b>ĞšĞ°Ğº ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ°ĞºÑ†Ğ¸Ñ/ÑĞºĞ¸Ğ´ĞºÑƒ?</b>\n"
        "â†’ Ğ£ÑĞ»ÑƒĞ³Ğ¸ â†’ ĞĞºÑ†Ğ¸Ğ¸ â†’ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ°ĞºÑ†Ğ¸Ñ\n\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
        "âš™ï¸ <b>ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜</b>\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n"
        "<b>ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‡Ğ°ÑÑ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹?</b>\n"
        "â†’ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ â†’ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ â†’ Ğ§Ğ°ÑÑ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹\n\n"
        "<b>ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ?</b>\n"
        "â†’ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ â†’ Ğ¢ĞµĞºÑÑ‚Ñ‹ â†’ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ\n\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
        "ğŸ†˜ <b>ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ«</b>\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n"
        "<b>Ğ‘Ğ¾Ñ‚ Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚</b>\n"
        "â†’ ĞŸĞ¾Ğ´Ğ¾Ğ¶Ğ´Ğ¸Ñ‚Ğµ 10-15 ÑĞµĞºÑƒĞ½Ğ´ Ğ¸ Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ°\n"
        "â†’ ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ /start Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞ°\n\n"
        "<b>ĞĞµ Ğ¼Ğ¾Ğ³Ñƒ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ</b>\n"
        "â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ€Ğ°Ğ·Ğ´ĞµĞ» Â«ĞĞµĞ´ĞµĞ»ÑÂ»\n\n"
        "<b>Ğ¢ĞµÑ…Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°:</b> @Oroani"
    )
    await message.answer(text)


async def reply_business_settings_handler(message: Message, config: dict):
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ±Ğ¸Ğ·Ğ½ĞµÑĞ°"""
    booking = config.get('booking', {})

    text = f"""
âš™ï¸ <b>ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜ Ğ‘Ğ˜Ğ—ĞĞ•Ğ¡Ğ</b>

Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ <b>ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ:</b> {config.get('business_name', 'ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾')}
ğŸ• <b>ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹:</b> {int(booking.get('work_start', 10))}:00
ğŸ•‘ <b>ĞšĞ¾Ğ½ĞµÑ† Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹:</b> {int(booking.get('work_end', 20))}:00
â± <b>Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ÑĞ»Ğ¾Ñ‚Ğ°:</b> {int(booking.get('slot_duration', 60))} Ğ¼Ğ¸Ğ½ÑƒÑ‚
ğŸŒ <b>Ğ§Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ:</b> {config.get('timezone_city', 'ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾')} (UTC{int(config.get('timezone_offset_hours', 3)):+d})
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ‡Ñ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ:
"""

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="âœï¸ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ", callback_data="edit_business_name")],
        [InlineKeyboardButton(text="ğŸ• Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°", callback_data="edit_work_start")],
        [InlineKeyboardButton(text="ğŸ•‘ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ ĞºĞ¾Ğ½Ñ†Ğ°", callback_data="edit_work_end")],
        [InlineKeyboardButton(text="â± Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑĞ»Ğ¾Ñ‚", callback_data="edit_slot_duration")],
        [InlineKeyboardButton(text="ğŸ”™ ĞĞ°Ğ·Ğ°Ğ´", callback_data="admin_settings")],
    ])

    await message.answer(text, reply_markup=keyboard)


async def reply_texts_handler(message: Message):
    """Ğ¢ĞµĞºÑÑ‚Ñ‹ Ğ±Ğ¾Ñ‚Ğ°"""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="ğŸ“ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚Ñ‹", callback_data="texts_menu")],
    ])
    await message.answer("ğŸ“ <b>Ğ¢ĞµĞºÑÑ‚Ñ‹ Ğ±Ğ¾Ñ‚Ğ°</b>", reply_markup=keyboard)


async def reply_notifications_handler(message: Message):
    """Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ"""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="ğŸ”” ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ", callback_data="notifications_menu")],
    ])
    await message.answer("ğŸ”” <b>Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ</b>", reply_markup=keyboard)


def register_handlers(dp):
    """Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ° ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸"""
    dp.message.register(reply_help_handler, F.text == "â“ ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ")
    dp.message.register(reply_business_settings_handler, F.text == "âš™ï¸ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ")
    dp.message.register(reply_texts_handler, F.text == "ğŸ“ Ğ¢ĞµĞºÑÑ‚Ñ‹")
    dp.message.register(reply_notifications_handler, F.text == "ğŸ”” Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ")

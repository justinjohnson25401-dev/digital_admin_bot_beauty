# AI_WORKFLOW.md ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤

> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: **2026-01-03**
> –í–µ—Ä—Å–∏—è: 2.0

---

## –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

```
1. –ß–∏—Ç–∞—é AI_WORKFLOW.md        (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
2. –ß–∏—Ç–∞—é .docs/ARCHITECTURE.md (–∫–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞)
3. –ß–∏—Ç–∞—é .docs/PROJECT_STATE.md (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
4. –ß–∏—Ç–∞—é .docs/BUGS_TRACKER.md  (—á—Ç–æ —Å–ª–æ–º–∞–Ω–æ)
5. –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
```

---

## –§–ê–ô–õ–´, –ö–û–¢–û–†–´–ï –ù–ï–õ–¨–ó–Ø –ú–ï–ù–Ø–¢–¨ –ë–ï–ó –ü–û–ù–ò–ú–ê–ù–ò–Ø

| –§–∞–π–ª | –†–∏—Å–∫ | –ü–æ—á–µ–º—É |
|------|------|--------|
| `utils/db/database.py` | üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô | –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º—ã –ë–î ‚Äî –º–æ–∂–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ |
| `admin_bot/middleware/auth.py` | üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å –¥–æ—Å—Ç—É–ø |
| `main.py` | üü° –í–´–°–û–ö–ò–ô | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ ‚Äî —Å–ª–æ–º–∞–µ—Ç—Å—è –≤–µ—Å—å –±–æ—Ç |
| `handlers/__init__.py` | üü° –í–´–°–û–ö–ò–ô | –°–±–æ—Ä–∫–∞ —Ä–æ—É—Ç–µ—Ä–æ–≤ ‚Äî —Å–ª–æ–º–∞–µ—Ç—Å—è –≤–µ—Å—å –±–æ—Ç |

---

## –§–ê–ô–õ–´, –ö–û–¢–û–†–´–ï –ú–û–ñ–ù–û –ë–ï–ó–û–ü–ê–°–ù–û –ú–ï–ù–Ø–¢–¨

| –§–∞–π–ª/–ü–∞–ø–∫–∞ | –ß—Ç–æ –º–µ–Ω—è—Ç—å | –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å |
|------------|------------|---------------|
| `handlers/booking/*.py` | –õ–æ–≥–∏–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | `python -c "from handlers.booking import router"` |
| `handlers/start.py` | –ú–µ–Ω—é –∫–ª–∏–µ–Ω—Ç–∞ | `python -c "from handlers.start import router"` |
| `admin_handlers/*.py` | –†–µ–¥–∞–∫—Ç–æ—Ä—ã –∞–¥–º–∏–Ω–∫–∏ | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–¥–º–∏–Ω-–±–æ—Ç–∞ |
| `utils/validators.py` | –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | `python -m pytest tests/test_validators.py` |
| `config/*.json` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JSON-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å |

---

## –ö–ê–ö –ò–ó–ë–ï–ñ–ê–¢–¨ –¶–ò–ö–õ–ò–ß–ï–°–ö–ò–• –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô

### –ü—Ä–∞–≤–∏–ª–æ 1: –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π "–≤–≤–µ—Ä—Ö"

```python
# –ü–õ–û–•–û: handlers/booking/date.py
from ..keyboards import get_calendar_keyboard  # –ò–¥—ë—Ç –≤ handlers/keyboards ‚Äî –ù–ï–¢ —Ç–∞–∫–æ–≥–æ!

# –•–û–†–û–®–û: handlers/booking/date.py
from .keyboards import get_calendar_keyboard   # –ò–¥—ë—Ç –≤ handlers/booking/keyboards ‚Äî –û–ö
```

### –ü—Ä–∞–≤–∏–ª–æ 2: –ü—Ä–æ–≤–µ—Ä—è–π –ø—É—Ç—å –∏–º–ø–æ—Ä—Ç–∞

```
.   = —Ç–µ–∫—É—â–∞—è –ø–∞–ø–∫–∞
..  = –ø–∞–ø–∫–∞ —É—Ä–æ–≤–Ω–µ–º –≤—ã—à–µ
... = –ø–∞–ø–∫–∞ –Ω–∞ 2 —É—Ä–æ–≤–Ω—è –≤—ã—à–µ

handlers/booking/date.py:
  from .keyboards   ‚Üí handlers/booking/keyboards.py ‚úÖ
  from ..keyboards  ‚Üí handlers/keyboards.py ‚ùå (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!)
```

### –ü—Ä–∞–≤–∏–ª–æ 3: –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–æ–≤ ‚Äî –ø—Ä–æ–≤–µ—Ä—å

```bash
python -c "from handlers import all_routers; print('OK')"
```

---

## –ü–†–ò–ú–ï–†–´ –•–û–†–û–®–ò–• –ò –ü–õ–û–•–ò–• –ó–ê–ü–†–û–°–û–í

### –•–æ—Ä–æ—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã:

```
‚úÖ "–î–æ–±–∞–≤—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ handlers/booking/contact.py"
   ‚Üí –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª, –ø–æ–Ω—è—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞

‚úÖ "–ò—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫—É ImportError –≤ handlers/booking/master.py —Å—Ç—Ä–æ–∫–∞ 11"
   ‚Üí –¢–æ—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –º–µ—Å—Ç–∞ –∏ –ø—Ä–æ–±–ª–µ–º—ã

‚úÖ "–î–æ–±–∞–≤—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É —á–µ—Ä–µ–∑ config/services.json"
   ‚Üí –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏, –Ω–µ —Å –∫–æ–¥–æ–º

‚úÖ "–ü—Ä–æ–≤–µ—Ä—å, –ø–æ—á–µ–º—É –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è"
   ‚Üí –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞
```

### –ü–ª–æ—Ö–∏–µ –∑–∞–ø—Ä–æ—Å—ã:

```
‚ùå "–ü–µ—Ä–µ–ø–∏—à–∏ –≤—Å—é —Å–∏—Å—Ç–µ–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"
   ‚Üí –°–ª–∏—à–∫–æ–º –º–∞—Å—à—Ç–∞–±–Ω–æ, –ª–µ–≥–∫–æ —Å–ª–æ–º–∞—Ç—å

‚ùå "–°–¥–µ–ª–∞–π –∫—Ä–∞—Å–∏–≤–æ"
   ‚Üí –ù–µ–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –Ω–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ —É—Å–ø–µ—Ö–∞

‚ùå "–î–æ–±–∞–≤—å –Ω–æ–≤—É—é —Ñ–∏—á—É" (–±–µ–∑ –¥–µ—Ç–∞–ª–µ–π)
   ‚Üí –ù–µ—è—Å–Ω–æ —á—Ç–æ –¥–µ–ª–∞—Ç—å

‚ùå "–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –∫–æ–¥"
   ‚Üí –ë–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –∏ –º–µ—Ç—Ä–∏–∫
```

---

## WORKFLOW (–ø–æ—à–∞–≥–æ–≤–æ)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏–ª –∑–∞–¥–∞—á—É

1. –ü–æ–Ω—è–ª –∑–∞–¥–∞—á—É (—Å–ø—Ä–æ—Å–∏–ª —É—Ç–æ—á–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. –ü—Ä–æ–≤–µ—Ä–∏–ª `.docs/PROJECT_STATE.md` ‚Äî –Ω–µ—Ç –ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–ª–æ–∫–µ—Ä–æ–≤
3. –ü—Ä–æ–≤–µ—Ä–∏–ª `.docs/BUGS_TRACKER.md` ‚Äî –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –ª–∏ –∑–∞–¥–∞—á–∞

### –®–∞–≥ 2: –í–Ω–æ—à—É –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. –ß–∏—Ç–∞—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ü–ï–†–ï–î –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. –î–µ–ª–∞—é –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—è—é –∏–º–ø–æ—Ä—Ç—ã –∫–æ–º–∞–Ω–¥–æ–π: `python -c "from X import Y"`
4. –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ—Å—Ç—ã ‚Äî –∑–∞–ø—É—Å–∫–∞—é: `python run_tests.py`

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª—è—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

–ü–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. `.docs/PROJECT_STATE.md` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
2. `.docs/BUGS_TRACKER.md` ‚Äî –æ—Ç–º–µ—Ç–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ
3. `.docs/CHANGELOG_AI.md` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å

### –®–∞–≥ 4: –ö–æ–º–º–∏—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ git)

```bash
git add .
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ handlers/booking"
git push
```

### –®–∞–≥ 5: –û—Ç—á—ë—Ç –≤–ª–∞–¥–µ–ª—å—Ü—É

```
‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- [–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏]

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- —Ñ–∞–π–ª X ‚Üí —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è]

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ
```

---

## –°–¢–ò–õ–¨ –†–ê–ë–û–¢–´

### –î–ï–õ–ê–ô:

- –ß–∏—Ç–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- –°–æ—Ö—Ä–∞–Ω—è–π —Å—Ç–∏–ª—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (PEP 8)
- –î–æ–±–∞–≤–ª—è–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ü–∏—à–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–µ
- –ü—Ä–æ–≤–µ—Ä—è–π –∏–º–ø–æ—Ä—Ç—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ë–î –∏—Å–ø–æ–ª—å–∑—É–π `DatabaseManager` –∏–∑ `utils.db`

### –ù–ï –î–ï–õ–ê–ô:

- –ù–ï –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–π –∫–æ–¥ "—Å –Ω—É–ª—è"
- –ù–ï –º–µ–Ω—è–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
- –ù–ï —É–¥–∞–ª—è–π —Ñ—É–Ω–∫—Ü–∏–∏ (–ø–æ–º–µ—á–∞–π @deprecated)
- –ù–ï –∫–æ–º–º–∏—Ç—å –±–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è
- –ù–ï –∑–∞–±—ã–≤–∞–π –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–π –∫–æ–¥ –≤–ª–∞–¥–µ–ª—å—Ü—É (–æ–Ω –Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç)

---

## –¢–ï–ö–£–©–ò–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (2026-01-03)

| ID | –ü—Ä–æ–±–ª–µ–º–∞ | –§–∞–π–ª | –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å |
|----|----------|------|---------------|
| P1-1 | –ò–º–ø–æ—Ä—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `start` | `handlers/booking/__init__.py:7` | –£–±—Ä–∞—Ç—å `start` –∏–∑ –∏–º–ø–æ—Ä—Ç–∞ |
| P1-2 | –ù–µ–≤–µ—Ä–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç `all_booking_routers` | `handlers/__init__.py:10` | –î–æ–±–∞–≤–∏—Ç—å –∞–ª–∏–∞—Å |
| P1-3 | `from ..keyboards` | `handlers/booking/master.py:11` | –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `from .keyboards` |
| P1-4 | `from ..utils` | `handlers/booking/master.py:12` | –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `from .utils` |
| P1-5 | `from ..keyboards` | `handlers/booking/date.py:12` | –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `from .keyboards` |
| P1-6 | `from ..keyboards` | `handlers/booking/time.py:12` | –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `from .keyboards` |

**–í–Ω–∏–º–∞–Ω–∏–µ:** –ü–æ–∫–∞ —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç –ù–ï –ó–ê–ü–£–°–¢–ò–¢–°–Ø!

---

## –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ó–ê–í–ï–†–®–ï–ù–ò–ï–ú

**–ö–æ–¥:**
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –∏–º–ø–æ—Ä—Ç—ã: `python -c "from handlers import all_routers"`
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- [ ] –ù–µ—Ç ERROR/CRITICAL –≤ –ª–æ–≥–∞—Ö

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω `PROJECT_STATE.md`
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω `BUGS_TRACKER.md`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å –≤ `CHANGELOG_AI.md`

**–ö–æ–º–º–∏—Ç:**
- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–º–∏—Ç–µ
- [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
